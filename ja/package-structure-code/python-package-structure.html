
<!DOCTYPE html>


<html lang="ja" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="科学的PythonプロジェクトのためのPythonパッケージ構造" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.pyopensci.org/python-package-guide/package-structure-code/python-package-structure.html" />
<meta property="og:site_name" content="pyOpenSci Python Package Guide" />
<meta property="og:description" content="There are two different layouts that you will commonly see within the Python packaging ecosystem: src and flat layouts. Both layouts have advantages for different groups of maintainers. We strongly..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="https://www.pyopensci.org/python-package-guide/_images/social_previews/summary_package-structure-code_python-package-structure_cea1b02e.png" />
<meta property="og:image:alt" content="There are two different layouts that you will commonly see within the Python packaging ecosystem: src and flat layouts. Both layouts have advantages for different groups of maintainers. We strongly..." />
<meta name="description" content="There are two different layouts that you will commonly see within the Python packaging ecosystem: src and flat layouts. Both layouts have advantages for different groups of maintainers. We strongly..." />
<meta name="twitter:card" content="summary_large_image" />
    <link href="https://www.pyopensci.org/images/favicon.ico" rel="icon" type="image/x-icon">
    <title>科学的PythonプロジェクトのためのPythonパッケージ構造 &#8212; Python Packaging Guide</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/pyos.css?v=c07158ed" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=be13464f"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/translations.js?v=91613774"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'package-structure-code/python-package-structure';</script>
    <script src="../_static/matomo.js?v=5a92784f"></script>
    <script src="../_static/language_select.js?v=a2e723a3"></script>
    <link rel="canonical" href="https://www.pyopensci.org/python-package-guide/package-structure-code/python-package-structure.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="パッケージの設定とメタデータにはpyproject.tomlファイルを使用します。" href="pyproject-toml-python-package-metadata.html" />
    <link rel="prev" title="Python Package Structure" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="ja"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">本文へスキップ</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>トップに戻る</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="バージョン警告"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content"><p><a href='https://www.pyopensci.org/about-peer-review/index.html'>We run peer review of scientific Python software. Learn more.</a></p></div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="サイトナビゲーション">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-light-mode.png" class="logo__image only-light" alt="pyOpenSci Python Package Guide. The pyOpenSci logo is a purple flower with pyOpenSci under it. The o in open sci is the center of the flower"/>
    <img src="../_static/logo-dark-mode.png" class="logo__image only-dark pst-js-only" alt="pyOpenSci Python Package Guide. The pyOpenSci logo is a purple flower with pyOpenSci under it. The o in open sci is the center of the flower"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/intro.html">
    チュートリアル
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="intro.html">
    パッケージング
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../documentation/index.html">
    ドキュメンテーション
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tests/index.html">
    テスト
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../continuous-integration/index.html">
    CI/CD
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://www.pyopensci.org">
    pyOpenSci Website
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://www.pyopensci.org/software-peer-review">
    Peer Review Guide
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://pyopensci.org/handbook">
    Handbook
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          <select class="dropdown" id="language-selector" aria-label="Choose a language">
  
<option
  value="/python-package-guide/ja/package-structure-code/python-package-structure.html"
  selected
>
  ja
</option>
<option
  value="/python-package-guide/package-structure-code/python-package-structure.html"
  
>
  en
</option>
</select>
        </div>
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="ライト"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="ダーク"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyopensci/python-package-guide" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pyOpenSci" title="Mastodon" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile"><select class="dropdown" id="language-selector" aria-label="Choose a language">
  
<option
  value="/python-package-guide/ja/package-structure-code/python-package-structure.html"
  selected
>
  ja
</option>
<option
  value="/python-package-guide/package-structure-code/python-package-structure.html"
  
>
  en
</option>
</select>
    </div>
  
    <div class="navbar-persistent--mobile">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="このページでは">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/intro.html">
    チュートリアル
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="intro.html">
    パッケージング
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../documentation/index.html">
    ドキュメンテーション
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tests/index.html">
    テスト
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../continuous-integration/index.html">
    CI/CD
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://www.pyopensci.org">
    pyOpenSci Website
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://www.pyopensci.org/software-peer-review">
    Peer Review Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://pyopensci.org/handbook">
    Handbook
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="ライト"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="ダーク"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyopensci/python-package-guide" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pyOpenSci" title="Mastodon" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="セクションナビゲーション">
  <p class="bd-links__title" role="heading" aria-level="1">セクションナビゲーション</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Create &amp; Build Your Package</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro.html">イントロ</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Pythonパッケージ構造</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyproject-toml-python-package-metadata.html">pyproject.toml パッケージのメタデータ</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-package-distribution-files-sdist-wheel.html">パッケージをビルドする</a></li>
<li class="toctree-l1"><a class="reference internal" href="declare-dependencies.html">依存関係の宣言</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-package-build-tools.html">パッケージビルドツール</a></li>
<li class="toctree-l1"><a class="reference internal" href="complex-python-package-builds.html">複雑なビルド</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Publish your package</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="publish-python-package-pypi-conda.html">Conda / PyPIで公開する</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-package-versions.html">パッケージバージョン</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-style-linting-format.html">コードスタイル</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="パンくずリスト" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="ホーム">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="intro.html" class="nav-link">Python Package Structure</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">科学的PythonプロジェクトのためのPythonパッケージ構造</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="python-package-structure-for-scientific-python-projects">
<h1>科学的PythonプロジェクトのためのPythonパッケージ構造<a class="headerlink" href="#python-package-structure-for-scientific-python-projects" title="Link to this heading">#</a></h1>
<p>There are two different layouts that you will commonly see
within the Python packaging ecosystem:
src and flat layouts.
Both layouts have advantages for different groups of maintainers.</p>
<p>We strongly suggest, but do not require, that you use the <strong>src/</strong> layout (discussed below)
for creating your Python package. This layout is also recommended in the
<a class="reference external" href="https://packaging.python.org/en/latest/tutorials/packaging-projects/">PyPA packaging guide tutorial</a>.</p>
<div class="important admonition">
<p class="admonition-title">pyOpenSciは査読のために特定のパッケージ構造を要求することはありません</p>
<p>We understand that it would take significant effort for existing
maintainers to move to a new layout.</p>
<p>このページの概要では、これから Python のパッケージングを始める人や、パッケージがシンプルなビルドで、より失敗のないアプローチに移行することに前向きな人に最適だと思われる推奨事項を紹介します。</p>
<p>Other resources you can check out:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://packaging.python.org/en/latest/discussions/src-layout-vs-flat-layout/">PyPA's overview of src vs flat layouts</a></p></li>
</ul>
</div>
<p>You can use tools like Hatch to quickly create a modern Python package structure. Check out our quickstart tutorial:</p>
<p><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-success sd-rounded-pill float-left reference external" href="https://www.pyopensci.org/python-package-guide/tutorials/installable-code.html#step-1-set-up-the-package-directory-structure"><span>Want to learn how to create the structure to build your package? Click here.</span></a></p>
<section id="what-is-the-python-package-source-layout">
<h2>What is the Python package source layout?<a class="headerlink" href="#what-is-the-python-package-source-layout" title="Link to this heading">#</a></h2>
<p>An example of the <strong>src/package</strong> layout structure is below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>myPackageRepoName
├── CHANGELOG.md               ┐
├── CODE_OF_CONDUCT.md         │
├── CONTRIBUTING.md            │
├── docs                       │ Package documentation
│   └── index.md
│   └── ...                    │
├── LICENSE                    │
├── README.md                  ┘
├── pyproject.toml             ] Package metadata and build configuration
├── src                        ┐
│   └── myPackage              │
│       ├── __init__.py        │ Package source code
│       ├── moduleA.py         │
│       └── moduleB.py         ┘
└── tests                      ┐
   └── ...                     ┘ Package tests
</pre></div>
</div>
<p>上の例では、以下のディレクトリの位置に注意してください:</p>
<ul class="simple">
<li><p><strong>docs/:</strong> Discussed in our docs chapter, this directory contains your user-facing documentation website. In a <strong>src/</strong> layout docs/ are normally included at the same directory level as the <strong>src/</strong> folder.</p></li>
<li><p><strong>tests/</strong> This directory contains the tests for your project code. In a <strong>src/</strong> layout, tests are normally included at the same directory level as the <strong>src/</strong> folder.</p></li>
<li><p><strong>src/package/</strong>: これはPythonプロジェクトのコードを含むディレクトリです。 &quot;Package&quot; は通常プロジェクトの名前です。</p></li>
</ul>
<p>また、上記の例では、pyOpenSciが必要とするすべてのコアドキュメントファイルがプロジェクトディレクトリのルートにあることに注意してください。 これらのファイルには以下が含まれています:</p>
<ul class="simple">
<li><p>CHANGELOG.md</p></li>
<li><p>CODE_OF_CONDUCT.md</p></li>
<li><p>CONTRIBUTING.md</p></li>
<li><p>LICENSE.txt</p></li>
<li><p>README.md</p></li>
</ul>
<!-- TODO: CHANGELOG is not mentioned in either documentation nor peer review -->
<p>パッケージングに関するドキュメント要件については、こちらをご覧ください。</p>
<div class="admonition-example-scientific-packages-that-use-src-package-layout admonition">
<p class="admonition-title"><strong>src/package</strong> レイアウトを使用する科学的パッケージの例</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/sourmash-bio/sourmash">Sourmash</a></p></li>
<li><p><a class="reference external" href="https://github.com/bokeh/bokeh">bokeh</a></p></li>
<li><p><a class="reference external" href="https://github.com/openscm/openscm-runner">openscm</a></p></li>
<li><p><a class="reference external" href="https://github.com/scikit-hep/awkward">awkward</a></p></li>
<li><p><a class="reference external" href="https://github.com/poliastro/poliastro/">poliastro</a></p></li>
</ul>
</div>
</section>
<section id="the-src-layout-and-testing">
<h2>src/ のレイアウトとテスト<a class="headerlink" href="#the-src-layout-and-testing" title="Link to this heading">#</a></h2>
<p>The benefit of using the <strong>src/package</strong> layout is that it ensures tests are run against the
installed version of your package rather than the files in your package
working directory. If you run your tests on your files rather than the
installed version of your package, you may be missing issues that users encounter when
your package is installed.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">tests/</span></code> are outside the <strong>src/package</strong> directory, they aren't included in the package's <a class="reference internal" href="python-package-distribution-files-sdist-wheel.html#python-wheel"><span class="std std-ref">wheel</span></a>. This makes your package size slightly smaller, which places a smaller storage burden on PyPI, and makes them faster to fetch.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://hynek.me/articles/testing-packaging/"><strong>src/package</strong> レイアウトを使用する理由についてもっと読む</a></p></li>
</ul>
<div class="admonition-how-python-discovers-and-prioritizes-importing-modules admonition">
<p class="admonition-title">Pythonはどのようにインポートモジュールを検出し、優先順位をつけるか</p>
<p>デフォルトでは、Pythonは現在の作業ディレクトリにあるモジュールをPythonモジュール検索パスの先頭に追加します。</p>
<p>つまり、パッケージの作業ディレクトリでフラットレイアウトの <code class="docutils literal notranslate"><span class="pre">/package/module.py</span></code> を使ってテストを実行すると、Python はインストールされたパッケージを検出する前に <code class="docutils literal notranslate"><span class="pre">package/module.py</span></code> ファイルを検出します。</p>
<p>However, if your package lives in a src/ directory structure <strong>src/package</strong>, then it won't be added to the Python path by default. This means that when you import your package, Python will be forced to search the active environment (which has your package installed).</p>
<p>Note: Python versions 3.11 and above have a path setting that can be adjusted to ensure the priority is to use installed packages first (e.g., <code class="docutils literal notranslate"><span class="pre">PYTHONSAFEPATH</span></code>).</p>
</div>
<section id="don-t-include-tests-in-your-package-wheel">
<h3>Don't include tests in your package wheel<a class="headerlink" href="#don-t-include-tests-in-your-package-wheel" title="Link to this heading">#</a></h3>
<p>Writing <a class="reference internal" href="../tests/index.html#tests-intro"><span class="std std-ref">tests</span></a> for your package is important; however, we do not recommend including tests as part of your <a class="reference internal" href="python-package-distribution-files-sdist-wheel.html#python-wheel"><span class="std std-ref">package wheel</span></a> by default. However, not including tests in your package distribution will make it harder for people other than yourself to test whether your package runs properly on their system. If you have a small test suite (Python files + data), and think your users may want to run tests locally on their systems, you can include tests by moving the <code class="docutils literal notranslate"><span class="pre">tests/</span></code> directory into the <strong>src/package</strong> directory (see example below).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>src/
<span class="w">  </span>package/
<span class="w">    </span>tests/
docs/
</pre></div>
</div>
<p>Including the <strong>tests/</strong> directory in your <strong>src/package</strong> directory ensures that tests will be included in your package's <a class="reference internal" href="python-package-distribution-files-sdist-wheel.html#python-wheel"><span class="std std-ref">wheel</span></a>.</p>
<p>パッケージ配布にテストを含める方法については、 <a class="reference external" href="https://docs.pytest.org/en/7.2.x/explanation/goodpractices.html#choosing-a-test-layout-import-rules">pytest documentation for more about including tests in your package distribution</a> を必ず読んでください。</p>
<div class="tip admonition">
<p class="admonition-title">パッケージwheelにテストとデータを含める際の課題</p>
<p>Tests, especially when accompanied by test data, can create a few small challenges, including:</p>
<ul class="simple">
<li><p>Take up space in your distribution, which will build up over time as storage space on PyPI</p></li>
<li><p>Large file sizes can also slow down package installation.</p></li>
</ul>
<p>However, in some cases, particularly in the scientific Python ecosystem, you may need to include tests.</p>
</div>
</section>
<section id="don-t-include-test-suite-datasets-in-your-package">
<h3><strong>テストスイートのデータセットをパッケージに含めないでください</strong><a class="headerlink" href="#don-t-include-test-suite-datasets-in-your-package" title="Link to this heading">#</a></h3>
<p>If you include your tests in your package distribution, we strongly
discourage you from including data in your test suite directory. Rather,
host your test data in a repository such as Figshare or Zenodo. Use a
tool such as <a class="reference external" href="https://www.fatiando.org/pooch/latest/">Pooch</a> to access
the data when you (or a user) runs tests.</p>
<p>For more information about Python package tests, see the <a class="reference internal" href="../tests/index.html#tests-intro"><span class="std std-ref">tests section of our guide</span></a>.</p>
<ul class="simple">
<li><p><strong>src/package</strong> レイアウトの方が意味的に明確である。 コードは常に <strong>src/package</strong> ディレクトリにあり、　<code class="docutils literal notranslate"><span class="pre">tests/</span></code> と <code class="docutils literal notranslate"><span class="pre">docs/</span></code> はルートディレクトリにあります。</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>If your package tests require data, do NOT include that
data within your package structure. Including data in your package structure increases the size of your
distribution files. This places a maintenance toll on repositories like PyPI and
Anaconda.org that have to deal with thousands of package uploads.</p>
</div>
<p><a class="sd-sphinx-override sd-btn sd-text-wrap sd-btn-success sd-rounded-pill float-left reference external" href="/tutorials/installable-code.html#step-1-set-up-the-package-directory-structure"><span>
Click here for a quickstart tutorial on creating your Python package.</span></a></p>
</section>
</section>
<section id="what-is-the-flat-python-package-layout">
<span id="flat-layout"></span><h2>What is the flat Python package layout?<a class="headerlink" href="#what-is-the-flat-python-package-layout" title="Link to this heading">#</a></h2>
<p>Many scientific packages use the <strong>flat-layout</strong> given:</p>
<ul class="simple">
<li><p>This layout is used by many core scientific Python packages such as NumPy, SciPy, and Matplotlib.</p></li>
<li><p>Many Python tools depend upon tools in other languages and/or complex builds
with compilation steps. Many maintainers prefer features
of the flat layout for more complex builds.</p></li>
</ul>
<p>While we suggest that you use the <strong>src/package</strong> layout discussed above, it's important to also
understand the flat layout, especially if you plan to contribute to a package that uses this layout.</p>
<div class="tip admonition">
<p class="admonition-title">ほとんどの科学的Pythonパッケージがソースを使わない理由</p>
<p>In most cases, moving to the <strong>src/package</strong> layout for
larger scientific packages that already use a flat layout would consume significant time.</p>
<p>However, the advantages of using the  <strong>src/package</strong> layout for a beginner are significant.
As such, we recommend that you use the <strong>src/package</strong> layout if you are creating a new package.</p>
<p>Numerous packages in the ecosystem <a class="reference external" href="https://github.com/scikit-build/cmake-python-distributions/pull/145">have had to move to a
<strong>src/package</strong> layout</a>.</p>
</div>
</section>
<section id="what-does-the-flat-layout-structure-look-like">
<h2>フラットレイアウトの構造はどのようなものですか？<a class="headerlink" href="#what-does-the-flat-layout-structure-look-like" title="Link to this heading">#</a></h2>
<p>フラットレイアウトの主な特徴は以下の通りです:</p>
<ul class="simple">
<li><p>パッケージのソースコードは、ディレクトリのルートにあるパッケージ名のディレクトリに格納されます</p></li>
<li><p>多くの場合、 <code class="docutils literal notranslate"><span class="pre">tests/</span></code> ディレクトリも同じ <code class="docutils literal notranslate"><span class="pre">package</span></code> ディレクトリの中にあります。</p></li>
</ul>
<p>以下に、フラットレイアウトを使った科学的Pythonパッケージの推奨構造を示します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>myPackage/
├──<span class="w"> </span>CHANGELOG.md<span class="w">             </span>┐
├──<span class="w"> </span>CODE_OF_CONDUCT.md<span class="w">       </span>│
├──<span class="w"> </span>CONTRIBUTING.md<span class="w">          </span>│
├──<span class="w"> </span>docs/<span class="w">                    </span>│<span class="w"> </span>Package<span class="w"> </span>documentation
│<span class="w">   </span>└──<span class="w"> </span>...<span class="w">                  </span>│
├──<span class="w"> </span>LICENSE<span class="w">                  </span>│
├──<span class="w"> </span>README.md<span class="w">                </span>┘
├──<span class="w"> </span>pyproject.toml<span class="w">           </span><span class="o">]</span><span class="w"> </span>Package<span class="w"> </span>metadata<span class="w"> </span>and<span class="w"> </span>build<span class="w"> </span>configuration
<span class="p">|</span><span class="w">   </span>myPackage/<span class="w">               </span>┐
│<span class="w">     </span>├──<span class="w"> </span>__init__.py<span class="w">        </span>│<span class="w"> </span>Package<span class="w"> </span><span class="nb">source</span><span class="w"> </span>code
│<span class="w">     </span>├──<span class="w"> </span>moduleA.py<span class="w">         </span>│
│<span class="w">     </span>└──<span class="w"> </span>moduleB.py<span class="w">         </span>┘
<span class="w">      </span>tests/<span class="w">                 </span>┐
<span class="w">        </span>└──<span class="w"> </span>test-file1.py<span class="w">    </span><span class="p">|</span><span class="w"> </span>Package<span class="w"> </span>tests
<span class="w">        </span>└──<span class="w"> </span>....<span class="w">             </span>┘
</pre></div>
</div>
<section id="benefits-of-using-the-flat-layout-in-your-python-package">
<h3>Pythonパッケージでフラットレイアウトを使うメリット<a class="headerlink" href="#benefits-of-using-the-flat-layout-in-your-python-package" title="Link to this heading">#</a></h3>
<p>フラットレイアウトを採用することは、科学コミュニティにとってもメリットがあります。</p>
<ul class="simple">
<li><p>この構造は歴史的にエコシステム全体で使われてきたものであり、これを使うパッケージが変わることはないでしょう。</p></li>
<li><p>ルートディレクトリからパッケージを直接インポートすることができます。これがそれぞれのワークフローに組み込まれている人もいるでしょう。しかし、初心者がこの方法をとる危険性は、インストールされたバージョンのパッケージに対して開発やテストを行っていないことにあります。 むしろ、フラットファイルを直接扱うことになります。</p></li>
</ul>
<div class="tip admonition">
<p class="admonition-title">フラットレイアウトを使用する科学的Pythonのコアパッケージ</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/numpy/numpy">numpy</a></p></li>
<li><p><a class="reference external" href="https://github.com/scipy/scipy">scipy</a></p></li>
<li><p><a class="reference external" href="https://github.com/pandas-dev/pandas">pandas</a></p></li>
<li><p><a class="reference external" href="https://github.com/pydata/xarray">xarray</a></p></li>
<li><p><a class="reference external" href="https://github.com/jupyter/jupyter_core">Jupyter-core</a></p></li>
<li><p><a class="reference external" href="https://github.com/jupyter/notebook">Jupyter notebook</a></p></li>
<li><p><a class="reference external" href="https://github.com/scikit-learn/scikit-learn">scikit-learn</a></p></li>
</ul>
<p>It would be a significant maintenance cost and burden to move all of these
packages to a different layout. The potential benefits of the source layout
for these tools are not worth the maintenance investment.</p>
</div>
<!--
Not sure where to put this now ... most new users won't have multiple packages. Maybe this goes into the complex packing page as we build that out?

```{admonition} Multiple packages in a src/ folder
:class: tip

In some more advanced cases, you may have more than one package in your **src/** directory. See [Black's GitHub repo](https://github.com/psf/black/tree/main/src) for an example of this. However, for most beginners you will likely only have one sub-directory in your **src/** folder.
``` -->
<!--
```{admonition} A few notes about the src/ layout
:class: tip

It is important to note here that sometimes, when using the **src/package** structure, the directory name (e.g., package name) is different from the actual project or package name. What is important to take away here is that you should store your code within a subdirectory within **src/**.
``` -->
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="前のページ">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">前へ</p>
        <p class="prev-next-title">Python Package Structure</p>
      </div>
    </a>
    <a class="right-next"
       href="pyproject-toml-python-package-metadata.html"
       title="次ページ">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">次へ</p>
        <p class="prev-next-title">パッケージの設定とメタデータにはpyproject.tomlファイルを使用します。</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> このページでは
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-the-python-package-source-layout">What is the Python package source layout?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-src-layout-and-testing">src/ のレイアウトとテスト</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#don-t-include-tests-in-your-package-wheel">Don't include tests in your package wheel</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#don-t-include-test-suite-datasets-in-your-package"><strong>テストスイートのデータセットをパッケージに含めないでください</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-the-flat-python-package-layout">What is the flat Python package layout?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-does-the-flat-layout-structure-look-like">フラットレイアウトの構造はどのようなものですか？</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#benefits-of-using-the-flat-layout-in-your-python-package">Pythonパッケージでフラットレイアウトを使うメリット</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/pyopensci/python-package-guide/edit/main/package-structure-code/python-package-structure.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          GitHub の編集
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/package-structure-code/python-package-structure.md.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p>
  pyOpensci is dedicated to creating a welcoming, supportive and diverse
  community around the open source Python tools that drive open science. Our
  <a
    href="https://www.pyopensci.org/handbook/CODE_OF_CONDUCT.html"
    target="_blank"
    >Code of Conduct</a
  >
  defines expected behavior and guidelines that help create such a community.
</p></div>
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, pyOpenSci.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
</div>

  </footer>
  </body>
</html>